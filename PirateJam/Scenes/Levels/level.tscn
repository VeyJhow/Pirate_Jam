[gd_scene load_steps=17 format=3 uid="uid://jvtabastfhij"]

[ext_resource type="PackedScene" uid="uid://b34246moptxfd" path="res://Scenes/UIs/rune_table.tscn" id="1_yc4io"]
[ext_resource type="PackedScene" uid="uid://bcg0vjb1md6jv" path="res://Scenes/player.tscn" id="2_76wbi"]
[ext_resource type="PackedScene" uid="uid://dxjn2mqcf37a8" path="res://Scenes/Components/shadow_object_creator.tscn" id="3_umeql"]
[ext_resource type="Texture2D" uid="uid://1fn8qddiq3no" path="res://Graphics/icon.svg" id="4_6dv4r"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nqaff"]
size = Vector2(43, 102)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_roasn"]
polygon = PackedVector2Array(-16, -25, -9, -43, 9, -43, 19, -27, 16, -13, 12, 0, 14, 16, 18, 30, 16, 40, -6, 42, -14, 39, -8, 18, -9, 8, -8, -7, -10, -14)

[sub_resource type="Gradient" id="Gradient_upxgy"]
offsets = PackedFloat32Array(1)
colors = PackedColorArray(1, 1, 1, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_bit23"]
gradient = SubResource("Gradient_upxgy")

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_x6y48"]
bounce = 1.0
absorbent = true

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2rs8p"]
size = Vector2(63.7478, 60)

[sub_resource type="Gradient" id="Gradient_63tg8"]
offsets = PackedFloat32Array(0.0358566, 0.505976)
colors = PackedColorArray(1, 1, 1, 1, 0, 0, 0, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_tc28e"]
gradient = SubResource("Gradient_63tg8")
use_hdr = true
fill = 1
fill_from = Vector2(0.5, 0.5)

[sub_resource type="SegmentShape2D" id="SegmentShape2D_agvol"]
a = Vector2(214, 71)
b = Vector2(-162, 79)

[sub_resource type="SegmentShape2D" id="SegmentShape2D_hixoe"]
a = Vector2(132, 325)
b = Vector2(196, 484)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_fb07p"]
texture = ExtResource("4_6dv4r")
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0
5:0/0 = 0
6:0/0 = 0
7:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
4:1/0 = 0
5:1/0 = 0
6:1/0 = 0
7:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
4:2/0 = 0
5:2/0 = 0
6:2/0 = 0
7:2/0 = 0
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
3:3/0 = 0
4:3/0 = 0
5:3/0 = 0
6:3/0 = 0
7:3/0 = 0
0:4/0 = 0
1:4/0 = 0
2:4/0 = 0
3:4/0 = 0
4:4/0 = 0
5:4/0 = 0
6:4/0 = 0
7:4/0 = 0
0:5/0 = 0
1:5/0 = 0
2:5/0 = 0
3:5/0 = 0
4:5/0 = 0
5:5/0 = 0
6:5/0 = 0
7:5/0 = 0
0:6/0 = 0
1:6/0 = 0
2:6/0 = 0
3:6/0 = 0
4:6/0 = 0
5:6/0 = 0
6:6/0 = 0
7:6/0 = 0
0:7/0 = 0
1:7/0 = 0
2:7/0 = 0
3:7/0 = 0
4:7/0 = 0
5:7/0 = 0
6:7/0 = 0
7:7/0 = 0

[sub_resource type="TileSet" id="TileSet_hel15"]
sources/0 = SubResource("TileSetAtlasSource_fb07p")

[node name="Level" type="Node2D"]

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color(0.685112, 0.592569, 0.771146, 1)

[node name="ColorRect" type="ColorRect" parent="."]
offset_left = -1347.0
offset_top = -565.0
offset_right = 1715.0
offset_bottom = 768.0
color = Color(0.301961, 0.301961, 0.301961, 1)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="RuneTable" parent="CanvasLayer" instance=ExtResource("1_yc4io")]

[node name="Player" parent="." instance=ExtResource("2_76wbi")]
position = Vector2(-472, 274)
floor_snap_length = 16.7
safe_margin = 0.1

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player"]
position = Vector2(2.5, -1)
shape = SubResource("RectangleShape2D_nqaff")

[node name="LightOccluder2D" type="LightOccluder2D" parent="Player"]
z_index = -1
z_as_relative = false
occluder = SubResource("OccluderPolygon2D_roasn")

[node name="ShadowObjectCreator" parent="Player" groups=["Spells"] instance=ExtResource("3_umeql")]

[node name="Camera2D" type="Camera2D" parent="Player"]
position = Vector2(-1, -38)
position_smoothing_enabled = true
position_smoothing_speed = 10.0

[node name="Sprite2D" type="Sprite2D" parent="."]
light_mask = 2
position = Vector2(-813, 441)
scale = Vector2(15.425, 1)
texture = SubResource("GradientTexture2D_bit23")

[node name="StaticBody2D" type="StaticBody2D" parent="Sprite2D"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Sprite2D/StaticBody2D"]
build_mode = 1
polygon = PackedVector2Array(31.9611, -28, 31.8963, 31, -32.3501, 31, -32.0259, -31)

[node name="Sprite2D2" type="Sprite2D" parent="."]
light_mask = 2
position = Vector2(-1435, 143)
rotation = -2.60247
scale = Vector2(20, 1)
texture = SubResource("GradientTexture2D_bit23")

[node name="StaticBody2D" type="StaticBody2D" parent="Sprite2D2"]
physics_material_override = SubResource("PhysicsMaterial_x6y48")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Sprite2D2/StaticBody2D"]
position = Vector2(-6.55651e-07, -1)
shape = SubResource("RectangleShape2D_2rs8p")

[node name="PointLight2D" type="PointLight2D" parent="." groups=["Lights"]]
position = Vector2(1, 3)
energy = 2.3
shadow_enabled = true
texture = SubResource("GradientTexture2D_tc28e")
texture_scale = 50.0

[node name="PointLight2D2" type="PointLight2D" parent="."]
position = Vector2(18, 30)
energy = 2.3
range_item_cull_mask = 2
texture = SubResource("GradientTexture2D_tc28e")
texture_scale = 50.0

[node name="Sprite2D3" type="Sprite2D" parent="."]
position = Vector2(-1435, 143)
rotation = -2.21638
scale = Vector2(20, 1)
texture = SubResource("GradientTexture2D_bit23")

[node name="StaticBody2D" type="StaticBody2D" parent="Sprite2D3"]
physics_material_override = SubResource("PhysicsMaterial_x6y48")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Sprite2D3/StaticBody2D"]
position = Vector2(-6.55651e-07, -1)
shape = SubResource("RectangleShape2D_2rs8p")

[node name="Sprite2D4" type="Sprite2D" parent="."]
position = Vector2(-1535, 34)
rotation = -1.76646
scale = Vector2(20, 1)
texture = SubResource("GradientTexture2D_bit23")

[node name="StaticBody2D" type="StaticBody2D" parent="Sprite2D4"]
physics_material_override = SubResource("PhysicsMaterial_x6y48")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Sprite2D4/StaticBody2D"]
position = Vector2(-6.55651e-07, -1)
shape = SubResource("RectangleShape2D_2rs8p")

[node name="StaticBody2D" type="StaticBody2D" parent="."]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="StaticBody2D"]

[node name="Sprite2D5" type="Sprite2D" parent="."]
position = Vector2(1109, 441)
scale = Vector2(15.425, 1)
texture = SubResource("GradientTexture2D_bit23")

[node name="StaticBody2D" type="StaticBody2D" parent="Sprite2D5"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Sprite2D5/StaticBody2D"]
position = Vector2(-6.55651e-07, -1)
shape = SubResource("RectangleShape2D_2rs8p")

[node name="StaticBody2D2" type="StaticBody2D" parent="."]
position = Vector2(-614, -1803)

[node name="Polygon2D" type="Polygon2D" parent="StaticBody2D2"]
polygon = PackedVector2Array(-244, 333, 132, 325, 368, 913, -648, 879)

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D2"]
position = Vector2(-82, 254)
shape = SubResource("SegmentShape2D_agvol")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="StaticBody2D2"]
shape = SubResource("SegmentShape2D_hixoe")

[node name="TileMap" type="TileMap" parent="."]
tile_set = SubResource("TileSet_hel15")
format = 2

[connection signal="end_rune_draw" from="CanvasLayer/RuneTable" to="Player" method="_on_rune_table_end_rune_draw"]
[connection signal="end_rune_draw" from="CanvasLayer/RuneTable" to="Player/ShadowObjectCreator" method="_on_rune_table_end_rune_draw"]
[connection signal="end_spell" from="Player/ShadowObjectCreator" to="Player" method="_on_shadow_object_creator_end_spell"]
